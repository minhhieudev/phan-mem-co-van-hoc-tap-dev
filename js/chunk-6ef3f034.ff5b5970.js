(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6ef3f034","chunk-626ec25e","chunk-52d87de2"],{"0f00":function(t,e,n){"use strict";n("787e")},"425e":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"emoji-picker"},t._l(t.emojis,(function(n,a){return e("div",{key:a,staticClass:"emoji",on:{click:function(e){return t.insertEmoji(n)}}},[t._v("\n    "+t._s(n)+"\n  ")])})),0)},i=[],r={data:function(){return{emojis:["😀","😃","😄","😁","😆","😅","😂","🤣","😊","😇","😍","😘","🥰","😎","🤩","😏","😌","😑","😒","😓","😔","😕","😖","😗","😙","😚","🙂","🤗","🤔","🤨","😐","😶","😏","😟","😠","😡","🥺","😢","😣","😤","😥","😦","😧","😨","😩","🤯","😬","😰","😱","😳","🤪","😵","😶‍🌫️","😷","🤒","🤕","🤢","🤮","🥴","🤧","😇","🤠","🥳","🥺","🥱","🤤","🤥","🤫","🤭","🧐","🤓","😈","👿","👹","👺","💀","👻","👽","🛸","🚀","🛰️","💥","💫","💦","💨","🌪️","🌩️","🌧️","🌨️","🌦️","🌤️","☀️","🌤️","⛅","🌥️","☁️","🌦️","🌧️","🌨️","🌩️","🌪️","💧","💦","🌊","🍏","🍎","🍐","🍊","🍋","🍌","🍉","🍇","🍓","🍈","🍒","🍑","🥭","🍍","🥥","🥝","🍅","🍆","🥑","🥦","🥬","🥒","🌶️","🌽","🥕","🥔","🍠","🥐","🍞","🥖","🥨","🧀","🥚","🍳","🧈","🥞","🧇","🥓","🥩","🍗","🍖","🦴","🌭","🍔","🍟","🍕","🥪","🍱","🍲","🥣","🥗","🍿","🧂","🥫","🍯","🍮","🍩","🍪","🎂","🍰","🧁","🥧","🍫","🍬","🍭","🍮","🍯","🍦","🍨","🍧","🎂","🍰","🧁","🥧","🍽️","🍴","🥄","🏺","🍶","🍾","🍷","🍸","🍹","🍺","🍻","🥂","🥃","🥤","🧊","🥢","🍽️","🥄","🏺","🥂","🍾","🍷","🍸","🍹","🍺","🍻","🥃","🥤","🧊","🥢"]}},methods:{insertEmoji:function(t){this.$emit("emoji-selected",t)}}},s=r,c=(n("9676"),n("2877")),o=Object(c["a"])(s,a,i,!1,null,"ca281478",null);e["default"]=o.exports},"436a":function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var a=n("beaf"),i=n("2420"),r=n("fd3a"),s=n("8c86");function c(t){Object(s["a"])(1,arguments);var e=Object(r["a"])(t);return e.setHours(0,0,0,0),e}var o=864e5;function l(t,e){Object(s["a"])(2,arguments);var n=c(t),a=c(e),r=n.getTime()-Object(i["a"])(n),l=a.getTime()-Object(i["a"])(a);return Math.round((r-l)/o)}var u=n("b166"),d=n("e3c5"),f=n("83d2"),h=n("fe1f");function p(t,e,n){var c,o,p,v,m,b,k,g,y,j;Object(s["a"])(2,arguments);var C=Object(r["a"])(t),w=Object(r["a"])(e),O=Object(a["a"])(),_=null!==(c=null!==(o=null===n||void 0===n?void 0:n.locale)&&void 0!==o?o:O.locale)&&void 0!==c?c:d["a"],x=Object(h["a"])(null!==(p=null!==(v=null!==(m=null!==(b=null===n||void 0===n?void 0:n.weekStartsOn)&&void 0!==b?b:null===n||void 0===n||null===(k=n.locale)||void 0===k||null===(g=k.options)||void 0===g?void 0:g.weekStartsOn)&&void 0!==m?m:O.weekStartsOn)&&void 0!==v?v:null===(y=O.locale)||void 0===y||null===(j=y.options)||void 0===j?void 0:j.weekStartsOn)&&void 0!==p?p:0);if(!_.localize)throw new RangeError("locale must contain localize property");if(!_.formatLong)throw new RangeError("locale must contain formatLong property");if(!_.formatRelative)throw new RangeError("locale must contain formatRelative property");var S,R=l(C,w);if(isNaN(R))throw new RangeError("Invalid time value");S=R<-6?"other":R<-1?"lastWeek":R<0?"yesterday":R<1?"today":R<2?"tomorrow":R<7?"nextWeek":"other";var A=Object(f["a"])(C,Object(i["a"])(C)),E=Object(f["a"])(w,Object(i["a"])(w)),P=_.formatRelative(S,A,E,{locale:_,weekStartsOn:x});return Object(u["a"])(C,P,{locale:_,weekStartsOn:x})}},"51f2":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"answer"},[e("div",{staticClass:"info"},[e("el-avatar",{attrs:{size:t.avatarSize,src:t.avatarUrl?t.avatarUrl:""}}),e("div",[e("div",{staticClass:"custom-flex"},[e("span",{staticClass:"author"},[t._v(t._s(t.user))]),e("span",{staticClass:"date"},[t._v(t._s(t.createdAt))])])]),e("div",{staticClass:"actions ml-4"},[e("div",{staticClass:"like-container"},[e("i",{staticClass:"fa fa-heart-o",attrs:{"aria-hidden":"true"},on:{click:function(e){return e.stopPropagation(),t.likeAnswers.apply(null,arguments)}}}),e("span",{staticClass:"likes"},[t._v(t._s(t.likesCount))])])])],1),e("div",{staticClass:"content"},[t._v(t._s(t.content))])])},i=[],r=(n("96cf"),n("1da1")),s=(n("c5f6"),n("436a")),c=n("b510"),o={props:{_id:String,content:String,user:String,createdAt:String,avatarUrl:String,likes:Number},data:function(){return{likesCount:0}},computed:{avatarSize:function(){return"small"},formattedDate:function(){return this.createdAt?this.formatDate(this.createdAt):""}},created:function(){this.likesCount=this.likes},methods:{formatDate:function(t){var e="";return t&&(e=Object(s["a"])(new Date(1e3*t),new Date),e=e.charAt(0).toUpperCase()+e.slice(1)),e},likeAnswers:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.likesCount++,t.prev=1,t.next=4,Object(c["d"])(this._id);case 4:t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](1),console.error("Lỗi khi cập nhật lượt thích: ",t.t0);case 9:case"end":return t.stop()}}),t,this,[[1,6]])})));function e(){return t.apply(this,arguments)}return e}()}},l=o,u=(n("a776"),n("2877")),d=Object(u["a"])(l,a,i,!1,null,"6210fb20",null);e["default"]=d.exports},7477:function(t,e,n){},"787e":function(t,e,n){},9676:function(t,e,n){"use strict";n("fc17")},"9a88":function(t,e,n){"use strict";n.r(e);n("57e7");var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"custom-dialog",staticStyle:{"z-index":"9999"}},[e("el-dialog",{attrs:{visible:t.isInviteMemberVisible},on:{"update:visible":function(e){t.isInviteMemberVisible=e}}},[e("div",{staticClass:"post p-1"},[e("div",{staticClass:"info"},[e("el-avatar",{attrs:{size:t.avatarSize,src:t.avatarUrl}}),e("div",{staticClass:"custom-flex"},[e("span",{staticClass:"author"},[t._v(t._s(t.user))]),e("span",{staticClass:"date"},[t._v(t._s(t.createdAt))])])],1),e("div",{staticClass:"title"},[t._v("\n        "+t._s(t.title)+"\n      ")]),e("div",{staticClass:"content",domProps:{innerHTML:t._s(t.formattedContent)}}),e("div",{staticClass:"actions"},[e("div",{staticClass:"like-container"},[e("i",{staticClass:"fa fa-heart-o",attrs:{"aria-hidden":"true"}}),e("span",{staticClass:"likes"},[t._v(t._s(t.likes))])]),e("div",{staticClass:"comment-container"},[e("el-icon",{staticClass:"el-icon-chat-dot-square",staticStyle:{color:"rgb(24, 61, 228)"}}),e("span",{staticClass:"comments"},[t._v(t._s(t.replyCount))])],1)]),t.attachmentPath.length>0?e("div",{staticClass:"attachments"},[e("p",[e("strong",[t._v("Đính kèm:")])]),e("ul",t._l(t.attachmentPath,(function(n,a){return e("li",{key:a},[e("a",{attrs:{href:n.path,target:"_blank",download:n.filename},on:{click:function(e){return e.preventDefault(),t.downloadAttachment(n)}}},[e("i",{class:t.getFileIconClass(n.filename).class,style:{color:t.getFileIconClass(n.filename).color}}),t._v("\n              "+t._s(n.filename)+"\n            ")])])})),0)]):t._e(),e("div",{staticClass:"reply-container"},[e("div",{staticClass:"avatar"},[e("el-avatar",{attrs:{size:t.avatarSize,src:this.$store.getters.currentUser.avatarUrl}})],1),e("div",{staticClass:"input-box"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.replyText,expression:"replyText"}],staticClass:"reply-input",attrs:{placeholder:"Nhập phản hồi của bạn..."},domProps:{value:t.replyText},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.sendReply.apply(null,arguments)},input:function(e){e.target.composing||(t.replyText=e.target.value)}}})]),e("div",{staticClass:"emoji-button",on:{click:t.showEmojiPicker}},[t._v("\n          😃\n        ")]),e("div",{staticClass:"send-button mr-3",on:{click:t.sendReply}},[e("i",{staticClass:"fa fa-paper-plane",staticStyle:{color:"rgb(12, 126, 233)"},attrs:{"aria-hidden":"true"}})])])]),t.isEmojiPickerVisible?e("emoji-picker",{on:{"emoji-selected":t.insertEmoji}}):t._e(),e("div",{staticClass:"answer-list mt-2",staticStyle:{"max-height":"200px","overflow-y":"auto"}},t._l(t.reply,(function(n){return e("reply",{key:n.id,attrs:{_id:n._id,content:n.content,avatarUrl:n.user.avatarUrl,user:n.user.fullname,createdAt:t.formatDate(n.createdAt),likes:n.likes}})})),1)],1)],1)},i=[],r=(n("28a5"),n("4f37"),n("a481"),n("c5f6"),n("51f2")),s=n("b510"),c=n("b166"),o=n("425e"),l=n("caf6"),u=n("bc3a"),d=n.n(u),f={props:{title:String,content:String,id:String,_id:String,user:String,createdAt:String,avatarUrl:String,likes:Number,attachmentPath:{type:Array,default:function(){return[]}},comments:Number},computed:{avatarSize:function(){return"small"},formattedContent:function(){return this.content.replace(/\n/g,"<br>")},formattedDate:function(){return this.createdAt?this.createdAt>0?this.formatDate(this.createdAt):"Ngày tạo không hợp lệ":"Ngày tạo không xác định"},replyCount:function(){return this.reply.length}},created:function(){},data:function(){return{replyText:"",reply:[],isInviteMemberVisible:!1,isEmojiPickerVisible:!1}},components:{Reply:r["default"],EmojiPicker:o["default"]},methods:{formatDate:function(t){return String(Object(c["a"])(new Date(t),"dd/MM/yyyy HH:mm"))},showEmojiPicker:function(){this.isEmojiPickerVisible=!0},insertEmoji:function(t){this.replyText+=t,this.isEmojiPickerVisible=!1},loadReply:function(){var t=this;Object(s["a"])(this.id).then((function(e){e&&e.data&&e.data.success?(t.reply=e.data.reply,Object(l["e"])(t.id,t.reply.length)):console.error("Không thành công: ",e.data)})).catch((function(t){console.error("Lỗi khi tải câu trả lời: ",t)}))},childFunction:function(){this.isInviteMemberVisible=!0,this.loadReply()},showInviteDialog:function(){this.isInviteMemberVisible=!0},sendReply:function(t){var e=this;if(""!==this.replyText.trim()){var n={content:this.replyText,post:this.id,user:this.$store.getters.user._id};Object(s["c"])(n).then((function(t){if(t&&200===t.status){var n=t.data;n&&n.success?(e.loadReply(),e.replyText=""):console.error("Lỗi khi lưu phản hồi: ",n)}else console.error("Lỗi khi gửi phản hồi, phản hồi không hợp lệ: ",t)})).catch((function(t){console.error("Lỗi khi gửi phản hồi: ",t)}))}},validatePhotoURL:function(t){return"string"===typeof t?t:""},toggleInviteMemberDialog:function(){this.internalIsInviteMemberVisible=!this.internalIsInviteMemberVisible},downloadAttachment:function(t){d()({url:t.path,method:"GET",responseType:"blob",baseURL:"https://backend-3lvb.onrender.com"}).then((function(e){var n=window.URL.createObjectURL(new Blob([e.data])),a=document.createElement("a");a.href=n,a.setAttribute("download",t.filename),document.body.appendChild(a),a.click(),document.body.removeChild(a)})).catch((function(t){console.error("Lỗi khi tải xuống tệp:",t)}))},getFileIconClass:function(t){var e=t.split(".").pop().toLowerCase(),n={class:"fas fa-file",color:"#333"};switch(e){case"pdf":n.class="fas fa-file-pdf",n.color="#ff0000";break;case"doc":case"docx":n.class="fas fa-file-word",n.color="#2b5797";break;case"xls":case"xlsx":n.class="fas fa-file-excel",n.color="#1f8a70";break;default:break}return n}}},h=f,p=(n("0f00"),n("2877")),v=Object(p["a"])(h,a,i,!1,null,null,null);e["default"]=v.exports},a776:function(t,e,n){"use strict";n("7477")},b510:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return c})),n.d(e,"d",(function(){return o}));var a=n("b775"),i="reply";function r(t){return Object(a["a"])({url:"/".concat(i,"/").concat(t),method:"get"})}function s(t){return Object(a["a"])({url:"/".concat(i,"/deleteReply/").concat(t),method:"delete"})}function c(t){return Object(a["a"])({url:"/".concat(i),method:"post",data:t})}function o(t){return Object(a["a"])({url:"/".concat(i,"/").concat(t),method:"post"})}},caf6:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"c",(function(){return s})),n.d(e,"d",(function(){return c})),n.d(e,"f",(function(){return o})),n.d(e,"g",(function(){return l})),n.d(e,"e",(function(){return u})),n.d(e,"h",(function(){return d})),n.d(e,"b",(function(){return f}));var a=n("b775"),i="post";function r(){return Object(a["a"])({url:"/".concat(i),method:"get"})}function s(t){return Object(a["a"])({url:"/".concat(i,"/").concat(t),method:"delete"})}function c(t){return Object(a["a"])({url:"/".concat(i),method:"post",data:t})}function o(t){return Object(a["a"])({url:"/".concat(i,"/like/").concat(t),method:"post"})}function l(t,e){return Object(a["a"])({url:"/".concat(i,"/updatePinnedStatus/").concat(t),method:"post",data:{pinned:e}})}function u(t,e){return Object(a["a"])({url:"/".concat(i,"/").concat(t,"/count"),method:"post",data:{answersCount:e}})}function d(t,e){return Object(a["a"])({url:"/".concat(i,"/updatePost/").concat(t),method:"post",data:{newPost:e}})}function f(t,e){return Object(a["a"])({url:"/".concat(i,"/paginated"),method:"get",params:{page:t,pageSize:e}})}},fc17:function(t,e,n){}}]);