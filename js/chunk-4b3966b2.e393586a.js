(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4b3966b2"],{"01fc":function(e,t,n){},"050a":function(e,t,n){},"8ca8":function(e,t,n){"use strict";n("01fc")},"8ddb":function(e,t,n){"use strict";n("050a")},d23a:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"wrapper-login"},[t("el-main",{staticClass:"m-3",class:e.$isMobile?"":"h-100"},[t("div",{staticClass:"row",class:e.$isMobile?"":"h-100"},[t("div",{staticClass:"col-md-6 d-flex justify-content-center align-items-center"}),t("div",{staticClass:"col-md-6 d-flex align-items-center text-center"},[t("div",{staticStyle:{width:"inherit","max-width":"500px","z-index":"999"}},[t("LoginFormSection")],1)])])])],1)},i=[],a=(n("1c01"),n("58b2"),n("8e6e"),n("f3e2"),n("d25f"),n("ac6a"),n("456d"),n("ade3")),s=(n("96cf"),n("1da1")),o=n("2ef0"),c=n.n(o),u=function(){var e=this,t=e._self._c;return t("div",{staticClass:"wrapper"},e._l(e.codelength,(function(n){return t("div",{key:"code-input"+n,staticClass:"item"},[t("input",{ref:"codes",refInFor:!0,staticClass:"el-input__inner input",attrs:{type:"number",autocomplete:"off",min:"0",max:"9",maxlength:"1","data-id":n},on:{paste:e.handlePaste,keydown:e.handleChangeValue,focus:e.handleFocus,change:e.handleChange}})])})),0)},h=[];n("a481"),n("4f37"),n("6d67"),n("c5f6");function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"next",n="next"===t?"nextElementSibling":"previousElementSibling";try{return e.parentElement[n].children[0]}catch(r){return!1}}var f={props:{codelength:{type:Number,default:6}},mounted:function(){var e=this;setTimeout((function(){e.$refs.codes[0].focus(),e.$emit("mounted",!0)}),200)},data:function(){return{code:""}},computed:{isValid:function(){return this.code.length===this.codelength}},methods:{handleChange:c.a.debounce((function(){this.code=this.$refs.codes.map((function(e){return e.value})).join(""),this.$emit("change",this.code)}),100),handleFocus:function(e){e.target.select()},handlePaste:function(e){e.stopPropagation(),e.preventDefault();var t=e.target;if(t&&t.dataset&&1===Number(t.dataset.id)){var n=e.clipboardData||window.clipboardData,r=n.getData("Text").trim();isNaN(r)||(this.$refs.codes.forEach((function(e,t){e.value=r[t]||""})),this.handleChange())}},handleChangeValue:function(e){var t=e.target;if(t&&(!isNaN(e.key)||"Backspace"===e.code))if(this.handleChange(),t.value=e.key.replace(/[^\d]/gi,""),t.value){var n=d(t);n&&n.focus(),e.preventDefault()}else if("Backspace"===e.code){var r=d(t,"prev");r&&r.focus()}}}},l=f,p=(n("8ddb"),n("2877")),m=Object(p["a"])(l,u,h,!1,null,"5b84ca00",null),g=m.exports,w=n("7ded"),v=n("9690"),b=function(){var e=this,t=e._self._c;return t("div",{},[t("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticClass:"box-login pt-3 position-relative"},[t("div",{staticClass:"progress-bar gradient-background"}),"login"===e.currentForm?t("el-form",{attrs:{"label-position":"top"},nativeOn:{submit:function(t){return t.preventDefault(),e.handleLogin.apply(null,arguments)}}},[t("el-form-item",[t("el-input",{attrs:{autofocus:"",placeholder:"Email address"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),t("el-form-item",[t("el-input",{attrs:{"show-password":"",placeholder:"Password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),t("el-form-item",[t("el-button",{staticClass:"btn-block",attrs:{type:"primary",icon:"el-icon-unlock","native-type":"submit"}},[e._v("\n          Đăng nhập\n        ")])],1)],1):e._e()],1)],1)},y=[],C={props:["metaPath"],components:{},data:function(){return{isLoading:!1,currentForm:"login",form:{email:"admin",password:"123456"}}},methods:{handleLogin:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!==this.form.email&&""!==this.form.password){e.next=3;break}return this.$notify({title:"Error",message:"Email or password cannot be empty",type:"error"}),e.abrupt("return",!1);case 3:return this.isLoading=!0,e.next=6,this.$store.dispatch("login",this.form).catch((function(){return{data:!1}}));case 6:t=e.sent,t&&this.$router.push("/"),this.isLoading=!1;case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},x=C,O=Object(p["a"])(x,b,y,!1,null,null,null),_=O.exports;function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var R={components:{CodeInput:g,LoginFormSection:_},data:function(){var e=this,t=function(t,n,r){e.formForgot.new_password!==n?r(new Error("Password confirmation is not match")):r()};return{form:{email:"",password:""},alert:{show:!1,variant:"danger",message:""},isLoading:!1,currentForm:"login",forgotPassword:{email:""},verifyCode:"",codeLength:6,countdownCounter:0,verification:{code:"",hash:"",user_id:"",is_trust:!1},authenticationMethod:"by_email",captchaResponse:"",authType:"",formForgot:{new_password:"",confirm_password:""},saveNewPasswordRules:{new_password:[{required:!0,trigger:"blur",message:"Password is required"}],confirm_password:[{validator:t}]},isTrust:!1}},watch:{isValidVerifyCode:function(e){}},methods:{afterSuccessfulLogin:function(e){var t=this;setTimeout((function(){t.$router.push("/")}),1e3)},handleSelect2FactorMethod:function(){this.authenticationMethod&&(this.currentForm="verify_code")},validateVerifyCodeChange:c.a.debounce(Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.handleVerify();case 1:case"end":return e.stop()}}),e,this)}))),1e3),handleVerify:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,n,r,i,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.isLoading=!0,t=k(k({},this.verification),{},{type:this.authType}),e.next=4,Object(w["g"])(t).then((function(e){return e.data})).catch((function(){return{success:!1}}));case 4:n=e.sent,r=n.success,i=n.token,a=n.user,s=n.trust_hash,this.isLoading=!1,r&&("two_factor"===this.authType?(this.$store.dispatch("setLoginData",{user:a,token:i}),this.afterSuccessfulLogin(a.clients),s&&Object(v["b"])("auth","trust_computer_hash",s)):"forgot_password"===this.authType&&(this.currentForm="new_password"));case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleCountdown:function(){var e=this,t=function(){var n=Object(s["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,new Promise((function(e){setTimeout((function(){return e()}),1e3)}));case 2:if(!(e.countdownCounter>=1)){n.next=5;break}return e.countdownCounter-=1,n.abrupt("return",t());case 5:return n.abrupt("return",!1);case 6:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();this.countdownCounter=-1,setTimeout((function(){e.countdownCounter=60,t()}),1500)},handleForgotPassword:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.forgotPassword.email){e.next=3;break}return this.$notify({title:"Error",message:"The email field cannot be empty",type:"error"}),e.abrupt("return");case 3:return this.isLoading=!0,e.next=6,Object(w["a"])({email:this.forgotPassword.email,response:this.captchaResponse}).catch((function(){return!1})).then((function(e){return e.data}));case 6:t=e.sent,this.isLoading=!1,t&&(t.success?(this.authType="forgot_password",t.default_method?(this.authenticationMethod=t.default_method,this.currentForm="verify_code"):this.currentForm="select_2_factor_method",this.verification.hash=t.hash,this.verification.user_id=t.user_id,this.verification.code=""):(this.forgotPassword.email="",this.handleResetReCaptcha()));case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleResetReCaptcha:function(){var e=this.$refs.recaptcha;e&&e.reset()},handleChangeCode:function(e){this.verification.code=e},sendVerificationCode:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.isLoading=!0,e.next=3,Object(w["f"])({method:this.authenticationMethod,user_id:this.verification.user_id,hash:this.verification.hash,type:this.authType}).then((function(e){return e.data})).catch((function(){return{success:!1}}));case 3:t=e.sent,n=t.success,r=t.code,this.isLoading=!1,n&&(r&&setTimeout((function(){prompt("Verification code: ",r)}),1e3),this.handleCountdown());case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleCodeInputMounted:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.sendVerificationCode();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleSubmitCode:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.handleVerify();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleCaptChaResponse:function(e){this.captchaResponse=e},handleSaveNewPassword:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$refs.formForgotPassword,e.next=3,t.validate();case 3:if(n=e.sent,n){e.next=6;break}return e.abrupt("return",!1);case 6:return this.isLoading=!0,r=k(k({},this.formForgot),{},{hash:this.verification.hash}),e.next=10,Object(w["e"])(r).catch((function(){return!1})).then((function(e){return e.data}));case 10:i=e.sent,this.isLoading=!1,i&&i.success&&(this.currentForm="login");case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleSelectClient:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("setClient",t.code);case 2:setTimeout((function(){n.$router.push("/")}),500);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},computed:{isValidVerifyCode:function(){return this.verification.code.length==this.codeLength}}},P=R,L=(n("8ca8"),Object(p["a"])(P,r,i,!1,null,"0852c402",null));t["default"]=L.exports}}]);