(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-57565704"],{"1e4b":function(t,e,n){"use strict";n("95cc")},"95cc":function(t,e,n){},ecde:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t._self._c;return e("div",[e("div",{ref:"postContainer",staticClass:"post my-2 p-3",class:{pinned:t.pinned},attrs:{id:t.id},on:{click:function(e){return t.openDetailQuestion(e)}}},[e("div",{staticClass:"info"},[e("div",{staticStyle:{display:"flex","justify-content":"center"}},[e("div",{staticStyle:{display:"flex","justify-content":"center","align-items":"center"}},[e("el-avatar",{attrs:{size:t.avatarSize,src:t.avatarUrl?t.avatarUrl:"https://res.cloudinary.com/dpxcvonet/image/upload/v1729304643/jjfd84acjaamikeefdzr.jpg"}}),e("div",{staticStyle:{display:"flex","flex-direction":"column"}},[e("span",{staticClass:"author ml-2"},[t._v(t._s(t.user)+" ( CVHT )")]),e("span",{staticClass:"date"},[t._v(t._s(t.createdAt))])])],1),t.pinned?e("div",{staticClass:"pinned-indicator"},[t._v("üìå B√†i vi·∫øt ƒë√£ ghim")]):t._e()]),t._id===this.$store.getters.user._id?e("el-dropdown",{on:{command:t.handleDropdownCommand,click:function(t){t.stopPropagation()}}},[e("span",{staticClass:"el-dropdown-link"},[e("i",{staticClass:"el-icon-more",on:{click:function(t){t.stopPropagation()}}})]),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t.pinned?t._e():e("el-dropdown-item",{attrs:{icon:"fa-solid fa-thumbtack",command:"pin"}},[t._v("\n            Ghim b√†i\n          ")]),t.pinned?e("el-dropdown-item",{attrs:{icon:"fa-solid fa-thumbtack",command:"unpin"}},[t._v("\n            Hu·ª∑ ghim\n          ")]):t._e(),e("el-dropdown-item",{attrs:{icon:"el-icon-edit",command:"edit"}},[t._v("\n            S·ª≠a\n          ")]),e("el-dropdown-item",{attrs:{icon:"el-icon-delete",command:"delete"}},[t._v("Xo√° b√†i")])],1)],1):t._e()],1),e("p",{staticClass:"font-weight-bold mt-1"},[e("span",{staticClass:"post-type",class:t.getPostTypeClass()},[t._v(t._s(t.getPostType()))])]),t.showFullContent?e("div",{staticClass:"content"},[e("div",{domProps:{innerHTML:t._s(t.content)}}),t.content.length>t.maxContentLength?e("div",{staticClass:"toggle-button-full-content",on:{click:function(e){return e.stopPropagation(),t.toggleContent.apply(null,arguments)}}},[t._v("\n        "+t._s(t.showFullContent?"Thu g·ªçn":"xem th√™m")+"\n      ")]):t._e()]):e("div",{staticClass:"content"},[e("div",{domProps:{innerHTML:t._s(t.truncatedContent)}}),t.content.length>t.maxContentLength?e("div",{staticClass:"toggle-button-truncated-content",on:{click:function(e){return e.stopPropagation(),t.toggleContent.apply(null,arguments)}}},[t._v("\n        "+t._s(t.showFullContent?"Thu g·ªçn":"xem th√™m")+"\n      ")]):t._e()]),t.attachmentPath.length>0?e("div",{staticClass:"attachments"},[t._m(0),e("ul",t._l(t.attachmentPath,(function(n,a){return e("li",{key:a,on:{click:function(t){t.stopPropagation()}}},[e("a",{attrs:{href:n.path,target:"_blank",download:n.filename},on:{click:function(e){return e.preventDefault(),t.downloadAttachment(n)}}},[e("i",{class:t.getFileIconClass(n.filename).class,style:{color:t.getFileIconClass(n.filename).color}}),t._v("\n            "+t._s(n.filename)+"\n          ")])])})),0)]):t._e(),e("div",{staticClass:"actions"},[e("div",{staticClass:"like-container"},[e("i",{staticClass:"fa fa-heart-o",attrs:{"aria-hidden":"true"},on:{click:function(e){return e.stopPropagation(),t.likeQuestion.apply(null,arguments)}}}),e("span",{staticClass:"likes"},[t._v(t._s(t.likesCount))])]),e("div",{staticClass:"comment-container"},[e("el-icon",{staticClass:"el-icon-chat-dot-square",staticStyle:{color:"rgb(24, 61, 228)"}}),e("span",{staticClass:"comments"},[t._v(t._s(t.comments))])],1)]),e("div",{staticClass:"reply-container"},[e("div",{staticClass:"avatar"},[e("el-avatar",{attrs:{size:t.avatarSize,src:this.$store.getters.currentUser&&this.$store.getters.currentUser.avatarUrl?this.$store.getters.currentUser.avatarUrl:"https://res.cloudinary.com/dpxcvonet/image/upload/v1729304643/jjfd84acjaamikeefdzr.jpg"}})],1),e("div",{staticClass:"input-box"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.replyText,expression:"replyText"}],staticClass:"reply-input",attrs:{placeholder:"Nh·∫≠p ph·∫£n h·ªìi c·ªßa b·∫°n..."},domProps:{value:t.replyText},on:{input:[function(e){e.target.composing||(t.replyText=e.target.value)},t.onReplyInputChange]}})]),e("div",{staticClass:"send-button mr-3"},[e("i",{staticClass:"fa fa-paper-plane",staticStyle:{color:"rgb(22, 77, 228)"},attrs:{"aria-hidden":"true"},on:{click:t.sendReply}})])])]),e("detailPostVue",{ref:"childRef",attrs:{id:t.id,title:t.title,content:t.content,avatarUrl:t.avatarUrl?t.avatarUrl:"",user:t.user,createdAt:t.createdAt,likes:t.likesCount,comments:t.comments,attachmentPath:t.attachmentPath}})],1)},i=[function(){var t=this,e=t._self._c;return e("p",[e("strong",[t._v("ƒê√≠nh k√®m:")])])}],o=n("ade3"),s=(n("4f37"),n("96cf"),n("1da1")),c=(n("28a5"),n("c5f6"),n("9a88")),r=n("b166"),l=n("caf6"),d=(n("15f5"),n("b510")),u=n("bc3a"),p=n.n(u),h={props:{title:String,content:{type:[String,Array],default:""},pinned:Boolean,postType:String,attachmentPath:{type:Array,default:function(){return[]}},id:String,_id:String,user:String,createdAt:String,avatarUrl:String,likes:Number,comments:Number},data:function(){return{showFullContent:!1,maxContentLength:350,showPopup:!1,replyText:"",isInviteMemberVisible:!1,likesCount:0}},components:{detailPostVue:c["default"]},computed:{avatarSize:function(){return"small"},formattedCreatedAt:function(){return this.createdAt?this.formatDate(new Date(this.createdAt)):""},truncatedContent:function(){return this.content&&"string"===typeof this.content&&this.content.length?this.content.slice(0,this.maxContentLength)+"...":this.content},computedPinned:{get:function(){return this.pinned},set:function(t){this.$emit("update:pinned",t)}}},created:function(){this.likesCount=this.likes},methods:Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])({downloadAttachment:function(t){p()({url:t.path,method:"GET",responseType:"blob",baseURL:"https://backend-3lvb.onrender.com"}).then((function(e){var n=window.URL.createObjectURL(new Blob([e.data])),a=document.createElement("a");a.href=n,a.setAttribute("download",t.filename),document.body.appendChild(a),a.click(),document.body.removeChild(a)})).catch((function(t){console.error("L·ªói khi t·∫£i xu·ªëng t·ªáp:",t)}))},formatDate:function(t){return t?Object(r["a"])(t,"dd/MM/yyyy HH:mm"):""},editPost:function(){this.$emit("edit",{id:this.id,title:this.title,content:this.content,typeof:this.postType,attachmentPath:this.attachmentPath,_id:this._id})},onReplyInputChange:function(){},getFileIconClass:function(t){var e=t.split(".").pop().toLowerCase(),n={class:"fas fa-file",color:"#333"};switch(e){case"pdf":n.class="fas fa-file-pdf",n.color="#ff0000";break;case"doc":case"docx":n.class="fas fa-file-word",n.color="#2b5797";break;case"xls":case"xlsx":n.class="fas fa-file-excel",n.color="#1f8a70";break;default:break}return n},confirmDelete:function(){var t=this;this.$confirm("X√°c nh·∫≠n x√≥a","C·∫£nh b√°o",{confirmButtonText:"X√≥a",type:"warning"}).then((function(){Object(l["c"])(t.id).then((function(e){var n=e.data;n.success&&(Object(d["b"])(t.id),t.$emit("pinnedStatusUpdated"))})).finally((function(){t.$wrLoading(!1)}))})).catch()},likeQuestion:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.likesCount++,t.prev=1,t.next=4,Object(l["f"])(this.id);case 4:t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](1),console.error("L·ªói khi c·∫≠p nh·∫≠t l∆∞·ª£t th√≠ch: ",t.t0);case 9:case"end":return t.stop()}}),t,this,[[1,6]])})));function e(){return t.apply(this,arguments)}return e}(),toggleContent:function(){this.showFullContent=!this.showFullContent},openDetailQuestion:function(t){t.stopPropagation(),this.$refs.childRef.childFunction()}},"onReplyInputChange",(function(){console.log("123")})),"sendReply",(function(){""!==this.replyText.trim()&&(this.replyText="")})),"getPostType",(function(){return"[ ".concat(this.postType.toUpperCase()," ] ").concat(this.title.toUpperCase())})),"getPostTypeClass",(function(){switch(this.postType.toLowerCase()){case"th√¥ng b√°o":return"thong-bao";case"t√†i li·ªáu":return"tai-lieu";case"b√†i ƒëƒÉng":return"bai-dang";default:return""}})),"showMoreOptions",(function(){this.dropdownVisible=!0})),"handleDropdownCommand",(function(t){"pin"===t||"unpin"===t?this.togglePinned():"edit"===t?this.editPost():"unpin"===t?this.togglePinned():"delete"===t&&this.confirmDelete()})),"togglePinned",function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=!this.pinned,this.$confirm("B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën ".concat(e?"ghim":"hu·ª∑ ghim"," b√†i vi·∫øt n√†y kh√¥ng?"),{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then((function(){n.updatePinnedStatus(e)})).catch((function(){console.log("Cancel")}));case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()),"updatePinnedStatus",function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(l["g"])(this.id,e);case 3:this.computedPinned=e,this.$emit("pinnedStatusUpdated"),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.error("L·ªói khi c·∫≠p nh·∫≠t tr·∫°ng th√°i pinned: ",t.t0);case 10:case"end":return t.stop()}}),t,this,[[0,7]])})));function e(e){return t.apply(this,arguments)}return e}())},f=h,m=(n("1e4b"),n("2877")),g=Object(m["a"])(f,a,i,!1,null,"43f1afd4",null);e["default"]=g.exports}}]);