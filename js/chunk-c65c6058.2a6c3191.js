(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c65c6058"],{"1b1c":function(t,e,n){"use strict";n("f0c2")},"2ca3":function(t,e,n){"use strict";n.r(e);n("386d");var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"custom-scroll-user ml-3"},[e("el-card",[e("div",{staticClass:"action-user"},[e("div",{staticClass:"d-flex justify-content-start"},[e("div",{staticClass:"d-flex align-items-center p-2",staticStyle:{color:"rgb(1, 6, 12)"}},[e("i",{staticClass:"fa-solid fa-rotate-right",on:{click:t.resetFilters}}),e("div",{staticClass:"d-flex align-items-center ml-5 border-right"},[e("i",{staticClass:"fa-solid fa-filter mr-3",staticStyle:{color:"rgb(3, 17, 17)"}}),e("div",{staticClass:"filter-options pr-4"},t._l(t.filterOptions,(function(n,a){return e("span",{key:a,class:{selected:t.selectedFilter===n.value},on:{click:function(e){return t.selectFilter(n.value)}}},[t._v("\n                "+t._s(n.label)+"\n              ")])})),0)])]),e("div",{staticClass:"d-flex align-items-center p-2"},[e("el-input",{staticClass:"custom-input-user",attrs:{size:"medium",placeholder:"Tìm theo tên và email ..."},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),e("el-button",{staticClass:"ml-2",staticStyle:{"background-color":"rgb(57, 139, 247)",color:"white"},attrs:{icon:"el-icon-search",circle:""}})],1)]),e("el-button",{attrs:{type:"success",round:"",size:"medium"},on:{click:function(e){return t.goToAddNewPage()}}},[t._v("Tạo mới")])],1),e("div",{staticStyle:{"max-height":"71vh","overflow-y":"auto"}},[e("el-table",{staticClass:"custom-table",staticStyle:{width:"100%"},attrs:{data:t.currentPageData}},[e("el-table-column",{attrs:{label:"STT",width:"120"},scopedSlots:t._u([{key:"default",fn:function(n){var a=n.$index;n.row;return[e("span",[t._v(t._s(a+1+(t.pagination.current_page-1)*t.pagination.page_size))])]}}])}),e("el-table-column",{attrs:{prop:"email",label:"Email"}}),e("el-table-column",{attrs:{label:"Tên"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[t._v("\n            "+t._s(t.getName(n))+"\n          ")]}}])}),e("el-table-column",{attrs:{prop:"role",label:"Quyền"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[t._v("\n            "+t._s(t.getRole(n))+"\n          ")]}}])}),e("el-table-column",{attrs:{label:"Thao tác",width:"150"},scopedSlots:t._u([{key:"default",fn:function(n){var a=n.row;return[e("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small",circle:""},on:{click:function(e){return e.preventDefault(),t.gotoDetail(a)}}}),e("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small",circle:""},on:{click:function(e){return e.preventDefault(),t.confirmDelete(a)}}})]}}])})],1)],1),e("div",{staticClass:"mt-2"},[e("el-pagination",{attrs:{background:"",layout:"jumper, prev, pager, next, sizes, total","page-sizes":[10,25,50,100],"page-size":t.pagination.page_size,total:t.filteredTableData.length,"current-page":t.pagination.current_page},on:{"update:pageSize":function(e){return t.$set(t.pagination,"page_size",e)},"update:page-size":function(e){return t.$set(t.pagination,"page_size",e)},"update:currentPage":function(e){return t.$set(t.pagination,"current_page",e)},"update:current-page":function(e){return t.$set(t.pagination,"current_page",e)},"current-change":t.handleCurrentPageChange,"size-change":t.handlePageSizeChange}})],1)])],1)},i=[],r=n("ade3"),l=(n("6762"),n("2fdb"),n("d25f"),n("c24f")),s=(n("15f5"),"user"),c={data:function(){return{pagination:{current_page:1,page_size:10},filterOptions:[{label:"Tất cả",value:"All"},{label:"Admin",value:"Admin"},{label:"Sinh viên",value:"student"},{label:"Cố vấn",value:"consultant"}],selectedFilter:"All",search:""}},created:function(){this.loadData()},computed:{filteredTableData:function(){var t=this;return this.$store.getters.users.filter((function(e){return(!t.search||e.fullname.toLowerCase().includes(t.search.toLowerCase()))&&("All"===t.selectedFilter||e.role===t.selectedFilter||"Admin"===t.selectedFilter&&!e.role||"student"===t.selectedFilter&&!e.role||"consultant"===t.selectedFilter&&!e.role)}))},currentPageData:function(){var t=(this.pagination.current_page-1)*this.pagination.page_size,e=t+this.pagination.page_size;return this.filteredTableData.slice(t,e)}},methods:Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])({goToAddNewPage:function(){this.$router.push({name:"".concat(s,"_new")})},gotoDetail:function(t){this.$router.push({name:"".concat(s,"_edit"),params:{id:t._id}})},confirmDelete:function(t){var e=this;t._id?this.$confirm("Xác nhận xóa ".concat(s,"?"),"Cảnh báo",{confirmButtonText:"Xóa",type:"warning"}).then((function(){Object(l["g"])(t._id).then((function(t){var n=t.data;n.success&&e.loadData()})).finally((function(){e.$wrLoading(!1)}))})).catch():console.error("ID người dùng không được định nghĩa.")},loadData:function(){var t=this;Object(l["c"])().then((function(e){var n=e.data;n.success&&t.setData({key:"users",data:{docs:n.docs,total:n.total}})}))},handlePageSizeChange:function(){this.pagination.current_page=1,this.loadData()}},"handlePageSizeChange",(function(t){this.pagination.page_size=t,this.pagination.current_page=1})),"handleCurrentPageChange",(function(t){this.pagination.current_page=t})),"selectFilter",(function(t){this.selectedFilter=t})),"resetFilters",(function(){this.search="",this.selectFilter("All")})),"getName",(function(t){return"Admin"==t.role||"student"==t.role||"consultant"==t.role?t.fullname:void 0})),"getRole",(function(t){return"Admin"==t.role?"Admin":"student"==t.role?"Sinh viên":"consultant"==t.role?"Cố vấn":void 0}))},o=c,u=(n("1b1c"),n("2877")),d=Object(u["a"])(o,a,i,!1,null,"7a82cd3c",null);e["default"]=d.exports},"386d":function(t,e,n){"use strict";var a=n("cb7c"),i=n("83a1"),r=n("5f1b");n("214f")("search",1,(function(t,e,n,l){return[function(n){var a=t(this),i=void 0==n?void 0:n[e];return void 0!==i?i.call(n,a):new RegExp(n)[e](String(a))},function(t){var e=l(n,t,this);if(e.done)return e.value;var s=a(t),c=String(this),o=s.lastIndex;i(o,0)||(s.lastIndex=0);var u=r(s,c);return i(s.lastIndex,o)||(s.lastIndex=o),null===u?-1:u.index}]}))},"83a1":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},f0c2:function(t,e,n){}}]);