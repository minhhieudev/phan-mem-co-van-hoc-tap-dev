(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4caea91f"],{"56ad":function(e,t,a){},6080:function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"d",(function(){return c})),a.d(t,"b",(function(){return s})),a.d(t,"e",(function(){return l})),a.d(t,"c",(function(){return i}));a("1c01"),a("58b2"),a("8e6e"),a("f3e2"),a("d25f"),a("ac6a"),a("456d"),a("ade3");var r=a("b775");var n="consultant";function o(){return Object(r["a"])({url:"/".concat(n),method:"get"})}function c(e){return Object(r["a"])({url:"/".concat(n,"/").concat(e),method:"delete"})}function s(e){return Object(r["a"])({url:"/".concat(n,"/").concat(e),method:"get"})}function l(e){return Object(r["a"])({url:"/".concat(n),method:"post",data:e})}function i(e){var t=e.email;return Object(r["a"])({url:"/".concat(n,"/get-fullName/").concat(encodeURIComponent(t)),method:"get"})}},"629d":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"ml-3 form-sv"},[t("el-card",[t("toolbar-widget",{attrs:{buttons:e.toolbarButtons}}),t("div",{staticClass:"col-md-6 mt-3"},[t("el-form",{ref:"form_data",attrs:{"label-width":"150px","label-position":"left",model:e.form}},[t("el-form-item",{attrs:{label:"Tên",required:""}},[t("el-input",{attrs:{autofocus:""},model:{value:e.form.fullname,callback:function(t){e.$set(e.form,"fullname",t)},expression:"form.fullname"}})],1),t("el-form-item",{attrs:{label:"Email",required:""}},[t("el-input",{model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),e.form._id?t("el-form-item",{attrs:{label:"Renew Password"}},[t("el-input",{model:{value:e.form.renew_password,callback:function(t){e.$set(e.form,"renew_password",t)},expression:"form.renew_password"}})],1):t("el-form-item",{attrs:{label:"Password",required:""}},[t("el-input",{model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),t("el-form-item",{attrs:{label:"Quyền"}},[t("el-select",{attrs:{placeholder:"Select"},model:{value:e.form.role,callback:function(t){e.$set(e.form,"role",t)},expression:"form.role"}},[t("el-option",{attrs:{label:"Sinh viên",value:"student"}}),t("el-option",{attrs:{label:"Cố vấn",value:"consultant"}}),t("el-option",{attrs:{label:"Admin",value:"Admin"}})],1)],1)],1)],1)],1)],1)},n=[],o=(a("96cf"),a("1da1")),c=a("c24f"),s=a("6080"),l=a("49e5"),i="user",u={data:function(){return{form:{fullname:"",role:"student"},hasChange:!1}},watch:{form:{handler:function(){this.hasChange=!0},deep:!0}},computed:{toolbarButtons:function(){var e=!0;return this.hasChange&&(e=!1),[{label:"Quay lại",route:"".concat(i,"_main")},{label:"Lưu và tiếp tục",disabled:e,callback:this.saveAndContinue,type:"primary"},{label:"Lưu",disabled:e,callback:this.handleSave,type:"primary"}]}},created:function(){this.loadData(this.$route.params.id)},methods:{loadData:function(e){var t=this;e&&(!e&&this.$route.params.id&&(e=this.$route.params.id),this.$wrLoading(!0),Object(c["d"])(e).then((function(e){var a=e.data;a.success&&(t.$set(t,"form",a.doc),t.hasChange=!1)})).catch((function(e){console.log(e)})).finally((function(){t.$wrLoading(!1)})))},saveAndContinue:function(){this.handleSave(!0)},handleSave:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,a=this,r=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=r.length>0&&void 0!==r[0]&&r[0],""!=this.form.fullname){e.next=4;break}return e.next=4,this.setFullName();case 4:this.$refs.form_data.validate(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!=r){e.next=4;break}return e.abrupt("return",!1);case 4:return a.$wrLoading(!0),e.next=7,Object(c["h"])(a.form).then((function(e){var r=e.data;1==r.success&&(!1===t?a.$router.push({name:"".concat(i,"_main")}):n=r.doc?r.doc._id:a.form._id)}));case 7:a.$wrLoading(!1),n&&(a.$route.params.id||a.$router.push({name:"".concat(i,"_edit"),params:{id:n}}),a.loadData(n),a.$store.dispatch("reRender"));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),setFullName:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,t=String(this.form.email),"consultant"!=this.form.role){e.next=10;break}return e.next=5,Object(s["c"])({email:t});case 5:return a=e.sent,a&&a.data&&a.data.success?this.form.fullname=a.data.fullName:console.error("Không thành công: ",a.data),e.abrupt("return");case 10:if("student"!=this.form.role){e.next=16;break}return e.next=13,Object(l["d"])({email:t});case 13:return r=e.sent,r&&r.data&&r.data.success?this.form.fullname=r.data.fullName:console.error("Không thành công: ",r.data),e.abrupt("return");case 16:e.next=21;break;case 18:e.prev=18,e.t0=e["catch"](0),console.error("Lỗi khi lấy tên: ",e.t0);case 21:case"end":return e.stop()}}),e,this,[[0,18]])})));function t(){return e.apply(this,arguments)}return t}()}},d=u,f=(a("e401"),a("2877")),m=Object(f["a"])(d,r,n,!1,null,"2c8d102c",null);t["default"]=m.exports},e401:function(e,t,a){"use strict";a("56ad")}}]);